/* path: app/info/offer/page.tsx */
import React from 'react';
import Link from 'next/link';
import type { Metadata } from 'next';
import BackBtn from '@/components/BackBtn';
import { PRICES, type Plan, type Tier, getPriceFor } from '@/lib/pricing';

export const metadata: Metadata = {
  title: 'Публичная оферта — LiveManager',
  description: 'Публичная оферта на оказание услуг сервиса LiveManager',
};

const TIERS: Tier[] = ['PRO', 'PROPLUS'];
const PLANS: Plan[] = ['WEEK', 'MONTH', 'HALF_YEAR', 'YEAR'];

function fmtXTR(n: number) {
  return `${n.toLocaleString('ru-RU')} XTR`;
}
function fmtRUB(kopecks: number) {
  const rub = kopecks / 100;
  return new Intl.NumberFormat('ru-RU', {
    style: 'currency',
    currency: 'RUB',
    maximumFractionDigits: 0,
  }).format(rub);
}

export default function OfferPage() {
  return (
    <main className="lm-page" style={{ maxWidth: 900 }}>
      <div style={{ position: 'relative', marginBottom: 6 }}>
        <BackBtn fallback="/cabinet" />
      </div>

      <h1>Публичная оферта на оказание услуг LiveManager</h1>
      <p className="lm-subtitle">Редакция от 01.10.2025</p>

      <p>
        Настоящий документ является публичной офертой (далее — «Оферта») в
        соответствии со статьёй 437 ГК РФ и определяет условия предоставления
        доступа к функционалу сервиса LiveManager (далее — «Сервис»,
        «Исполнитель») пользователям (далее — «Пользователь»).
      </p>

      <h2>1. Термины</h2>
      <ul>
        <li>
          <b>Сервис (LiveManager)</b> — программно-аппаратный комплекс,
          предоставляющий онлайн-инструменты и чат-ассистента на базе ИИ,
          доступные через мини-приложения Telegram/VK и веб-интерфейс.
        </li>
        <li>
          <b>Аккаунт</b> — учётная запись, создаваемая посредством авторизации в
          Telegram/VK Mini Apps или на сайте.
        </li>
        <li>
          <b>Подписка</b> — платный доступ к расширенным возможностям Сервиса
          (тарифы Pro/Pro+), предоставляемый на определённый период.
        </li>
        <li>
          <b>Контент</b> — тексты, изображения и иные результаты работы Сервиса,
          генерируемые по запросу Пользователя.
        </li>
      </ul>

      <h2>2. Предмет Оферты</h2>
      <p>
        Исполнитель предоставляет Пользователю доступ к функционалу Сервиса,
        включая базовые и платные возможности по модели подписки, а Пользователь
        обязуется соблюдать условия Оферты и оплачивать Подписку (при её
        оформлении).
      </p>

      <h2>3. Акцепт Оферты и заключение договора</h2>
      <p>
        Договор считается заключённым с момента совершения любого из действий:
        (1) оплаты Подписки; (2) фактического начала использования Сервиса; (3)
        явного подтверждения согласия с условиями Оферты в интерфейсе.
      </p>

      <h2>4. Регистрация и доступ</h2>
      <ul>
        <li>
          Авторизация осуществляется через Telegram WebApp/VK Mini Apps либо
          иными способами, указанными в интерфейсе. Возраст — 16+ лет.
        </li>
        <li>
          Пользователь гарантирует достоверность предоставляемых данных и несёт
          ответственность за безопасность своего доступа к аккаунту.
        </li>
      </ul>

      <h2>5. Стоимость, оплата и продление</h2>
      <ul>
        <li>
          Текущие тарифы и объём включённых возможностей опубликованы в
          интерфейсе Сервиса и в Приложении 1 к Оферте (ниже). Стоимость может
          изменяться Исполнителем в одностороннем порядке с публикацией новых
          условий; изменения не затрагивают уже оплаченную Подписку до окончания
          её периода.
        </li>
        <li>
          Оплата принимается через платёжные провайдеры (в т.ч. Robokassa, VK
          Pay и иные, указанные в интерфейсе). Платёж считается совершённым
          после подтверждения провайдера.
        </li>
        <li>
          Подписка может продлеваться автоматически, если это предусмотрено
          провайдером и активировано Пользователем. Автопродление можно
          отключить до даты списания в интерфейсе провайдера/Сервиса.
        </li>
      </ul>

      <h2>6. Возвраты и претензии</h2>
      <ul>
        <li>
          Возврат возможен в случаях: (а) двойного списания; (б) технической
          невозможности предоставить доступ более 24 часов подряд по вине
          Исполнителя; (в) иных случаях, предусмотренных законом. Для возврата
          необходима заявка в поддержку с приложением платёжных подтверждений.
        </li>
        <li>
          Претензионный порядок обязателен: претензия направляется на адрес
          поддержки, указанный ниже. Срок ответа — до 10 рабочих дней.
        </li>
      </ul>

      <h2>7. Ограничения использования</h2>
      <ul>
        <li>
          Запрещается: (а) нарушать права третьих лиц; (б) пытаться обойти
          ограничения доступа/лимиты; (в) использовать Сервис для противоправных
          целей; (г) реинжиниринг, копирование и распространение компонентов
          Сервиса без согласия Исполнителя.
        </li>
        <li>
          Контент ИИ может содержать неточности. Пользователь обязан критически
          оценивать результаты и несёт ответственность за их применение.
        </li>
      </ul>

      <h2>8. Интеллектуальная собственность и лицензия</h2>
      <ul>
        <li>
          Пользователю предоставляется неисключительная, непередаваемая лицензия
          на использование Сервиса и сгенерированного Контента в своих целях при
          соблюдении закона и условий Оферты.
        </li>
        <li>
          Правообладателем Сервиса является Исполнитель. Отдельные компоненты
          могут использоваться на основании открытых лицензий — их условия
          сохраняются.
        </li>
      </ul>

      <h2>9. Персональные данные</h2>
      <p>
        Обработка данных осуществляется в соответствии с{' '}
        <Link href="/info/privacy">Политикой конфиденциальности</Link>.
        Используя Сервис, Пользователь выражает согласие на обработку данных в
        указанных целях.
      </p>

      <h2>10. Ответственность</h2>
      <ul>
        <li>
          Сервис предоставляется «как есть». Исполнитель не несёт ответственности
          за косвенные убытки, упущенную выгоду, а также за сбои, вызванные
          провайдерами, платформами (Telegram/VK), платёжными провайдерами,
          форс-мажором.
        </li>
        <li>
          Совокупная ответственность Исполнителя ограничена суммой, фактически
          уплаченной Пользователем за последний оплаченный период Подписки.
        </li>
      </ul>

      <h2>11. Форс-мажор</h2>
      <p>
        Стороны освобождаются от ответственности за частичное или полное
        неисполнение обязательств при наступлении обстоятельств непреодолимой
        силы (форс-мажор).
      </p>

      <h2>12. Срок действия и расторжение</h2>
      <ul>
        <li>
          Оферта действует бессрочно до её отзыва Исполнителем. Договор действует
          в течение всего периода использования Сервиса/Подписки.
        </li>
        <li>
          Пользователь может прекратить использование в любое время. При грубом
          нарушении условий Оферты Исполнитель вправе ограничить доступ без
          компенсации.
        </li>
      </ul>

      <h2>13. Применимое право и споры</h2>
      <p>
        Применяется право РФ. Споры решаются в претензионном порядке, затем в
        суде по месту нахождения Исполнителя (если иное не предусмотрено
        императивной нормой).
      </p>

      <h2>14. Реквизиты и контакты</h2>
      <ul>
        <li>Исполнитель: <b>«LiveManager»</b></li>
        <li>Поддержка: <b>support@seimngr</b></li>
      </ul>

      {/* Приложение 1. Тарифы */}
      <h2 style={{ marginTop: 32 }}>Приложение 1. Тарифы и стоимость</h2>
      <p>
        Цены подтягиваются из <code>lib/pricing.ts</code>. Для <b>Telegram</b> —{' '}
        <b>XTR (Stars)</b>, для <b>VK</b> — <b>рубли</b> (копейки). Итоговая сумма у
        платёжного провайдера может отличаться из-за комиссий и является приоритетной.
      </p>

      {TIERS.map((tier) => (
        <section key={tier} style={{ marginTop: 18 }}>
          <h3>{tier === 'PRO' ? 'Тариф «Pro»' : 'Тариф «Pro+»'}</h3>
          <div style={{ overflowX: 'auto', border: '1px solid var(--card-border)', borderRadius: 12 }}>
            <table style={{ width: '100%', borderCollapse: 'collapse' }}>
              <thead>
                <tr style={{ background: 'rgba(255,255,255,.04)' }}>
                  <th style={th}>Период</th>
                  <th style={th}>Описание</th>
                  <th style={th}>Telegram (XTR)</th>
                  <th style={th}>VK (₽)</th>
                </tr>
              </thead>
              <tbody>
                {PLANS.map((plan) => {
                  const base = PRICES[tier][plan];
                  const tg = getPriceFor(tier, plan, 'TG');
                  const vk = getPriceFor(tier, plan, 'VK');
                  return (
                    <tr key={plan}>
                      <td style={td}><b>{base.label}</b></td>
                      <td style={td}>{base.description}</td>
                      <td style={td}>{fmtXTR(tg.amount)}</td>
                      <td style={td}>{fmtRUB(vk.amount)}</td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>
        </section>
      ))}

      <p style={{ marginTop: 12, opacity: .8 }}>
        Примечание: цены могут изменяться. Обновления публикуются в интерфейсе
        Сервиса; ранее оплаченное не пересчитывается до окончания периода.
      </p>

      <p style={{ marginTop: 24 }}>
        Актуальная редакция Оферты: <Link href="/info/offer">/info/offer</Link>
      </p>
    </main>
  );
}

const th: React.CSSProperties = {
  textAlign: 'left',
  padding: '10px 12px',
  borderBottom: '1px solid var(--card-border)',
  whiteSpace: 'nowrap',
};
const td: React.CSSProperties = {
  padding: '10px 12px',
  borderBottom: '1px solid var(--card-border)',
  verticalAlign: 'top',
};
