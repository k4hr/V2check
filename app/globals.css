/* path: app/globals.css */

/* ===== Палитра и базовая (всегда тёмная) тема ===== */
:root {
  /* Говорим браузеру и нативным контролам, что UI тёмный */
  color-scheme: dark;

  --text: #e5e7eb;          /* основной текст */
  --fg: #e5e7eb;            /* на всякий случай для inline-стилей */
  --subtle: #9aa3b2;        /* вторичный текст */
  --border: rgba(148,163,184,.12);

  --bg1: #0b1220;
  --bg2: #0f172a;

  --card-bg: #111827;
  --card-border: rgba(148,163,184,.12);
  --card-hover: rgba(99,102,241,.10);
  --radius: 16px;
  --shadow: 0 10px 30px rgba(0,0,0,.35);

  --pro: #6366f1;
  --proplus: #f59e0b;
}

/* Никаких auto-light: убрали media query с prefers-color-scheme */

/* ===== Базовые стили ===== */
html, body { height: 100%; }
*,
*::before,
*::after { box-sizing: border-box; }

body {
  color: var(--text);
  background: var(--bg1);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  margin: 0;
  -webkit-text-size-adjust: 100%;
}

/* Градиентная «живая» подложка */
.lm-bg {
  position: fixed; inset: 0; z-index: -1;
  background:
    radial-gradient(1200px 500px at 70% -10%, var(--bg2), transparent 60%),
    linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
}

/* Контейнер страницы */
.lm-page { padding: 20px; max-width: 900px; margin: 0 auto; }

/* Заголовки */
h1 { font-weight: 800; letter-spacing: -0.02em; margin: 12px 0 8px; }
.lm-subtitle { color: var(--subtle); margin: 0 0 12px; }

/* ===== Сетка главного меню (если понадобится) ===== */
.lm-grid { display: grid; gap: 14px; }
@media (min-width: 560px) { .lm-grid--2col { grid-template-columns: 1fr 1fr; } }

/* ===== Карточки (совместимы с Link и button) ===== */
.card {
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 16px;
  border-radius: var(--radius);
  background: var(--card-bg);
  border:1px solid var(--card-border);
  color:inherit; text-decoration:none;
  box-shadow: var(--shadow);
  transition: transform .08s ease, border-color .15s ease, background .15s ease;
  -webkit-tap-highlight-color: transparent;
}
.card:hover {
  transform: translateY(-1px);
  border-color: var(--pro);
  background: color-mix(in srgb, var(--card-bg) 90%, var(--card-hover));
}
.card:active { transform: translateY(0); }
.card__left { display:flex; align-items:center; gap:12px; }
.card__icon {
  font-size:22px; line-height:1; width:36px; height:36px;
  display:grid; place-items:center; border-radius:10px;
  background: linear-gradient(135deg, rgba(99,102,241,.15), rgba(79,70,229,.12));
}
.card__title { font-weight:700; }
.card__chev { opacity:.5; }

/* Акценты */
.card--pro .card__icon { background: linear-gradient(135deg, rgba(99,102,241,.18), rgba(59,130,246,.14)); }
.card--proplus .card__icon { background: linear-gradient(135deg, rgba(245,158,11,.22), rgba(251,191,36,.18)); }
.badge { margin-left:6px; font-weight:700; color: var(--pro); }
.badge--gold { color: var(--proplus); }

/* ===== Чип «Назад» (общий) ===== */
.back-chip {
  display:inline-flex; align-items:center; gap:8px;
  border:1px solid var(--card-border);
  background: var(--card-bg);
  padding:8px 12px; border-radius:999px;
  box-shadow: var(--shadow);
}
.back-chip:hover { border-color: var(--pro); }

/* ===== Совместимость с текущими кнопками ===== */
.list-btn {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; border-radius:12px;
  background: var(--card-bg); border:1px solid var(--card-border);
  color:inherit; box-shadow: var(--shadow);
}
.list-btn__left { display:flex; align-items:center; gap:10px; }
.list-btn__right { opacity:.7; }
.list-btn__emoji { width:26px; display:inline-flex; justify-content:center; }

/* тонкая кнопка-ссылка внизу */
.ghost-link {
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius:10px;
  border:1px dashed rgba(115,130,255,.35);
  background: rgba(115,130,255,.06);
  color:#aab3ff; font-weight:600;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.ghost-link:hover {
  transform: translateY(-1px);
  background: rgba(115,130,255,.1);
  border-color: rgba(115,130,255,.55);
}

/* =============================== */
/* Chat composer (универсальный фикс под iOS 17/18, iPhone 13–15) */
/* Добавь класс .lm-composer на контейнер нижней панели ввода,
   .lm-composer__btn на плюс/стрелку и .lm-composer__field на input/textarea. */
/* =============================== */

.lm-composer {
  --h: 48px;                 /* единая высота */
  --r: 14px;                 /* радиус скругления */
  position: sticky;
  bottom: max(env(safe-area-inset-bottom, 0px), 6px);
  display: grid;
  grid-template-columns: var(--h) 1fr var(--h);
  gap: 8px;
  align-items: center;
  padding: 8px;
  background: transparent;
  z-index: 5;
}

.lm-composer__btn {
  height: var(--h);
  width: var(--h);
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  display: grid;            /* надёжная центровка иконок на всех девайсах */
  place-items: center;
  line-height: 1;           /* убираем baseline-смещение */
  -webkit-appearance: none;
  box-shadow: 0 0 0 1px rgba(255,255,255,.04) inset, 0 10px 26px rgba(0,0,0,.35);
}

.lm-composer__btn svg,
.lm-composer__btn i,
.lm-composer__btn span {
  display: block;           /* чтобы иконка не прыгала из-за inline-baseline */
}

.lm-composer__field {
  min-height: var(--h);
  height: var(--h);
  border-radius: var(--r);
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  box-shadow: 0 0 0 1px rgba(255,255,255,.04) inset, 0 10px 26px rgba(0,0,0,.35);
  padding: 0 14px;          /* вертикаль держим высотой, не паддингами */
  display: flex;            /* для textarea с единой высотой */
  align-items: center;      /* центрируем текст по вертикали */
  line-height: 1.2;
  font-size: 16px;          /* предотвращает iOS-zoom на фокусе */
  color: var(--text);
}

/* если поле — textarea */
.lm-composer__field textarea {
  width: 100%;
  height: 100%;
  resize: none;
  border: 0;
  outline: none;
  background: transparent;
  color: inherit;
  line-height: 1.2;
  padding: 0;
}

/* если поле — input */
.lm-composer__field input[type="text"],
.lm-composer__field input[type="search"] {
  width: 100%;
  height: 100%;
  border: 0;
  outline: none;
  background: transparent;
  color: inherit;
  line-height: var(--h);    /* для input — идеальный вертикальный центр */
  padding: 0;
}

/* чтобы иконки и текст не сдвигались на ретинах */
.lm-composer,
.lm-composer * {
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  transform: translateZ(0); /* убирает сабпиксельные артефакты iOS */
}
